<!DOCTYPE>
<html>
	<head>
		<title>Session 7 - The Recap</title>
		<link href="https://fonts.googleapis.com/css?family=Sacramento|Source+Serif+Pro" rel="stylesheet">
		<meta name="viewport" content="width=device-width, initial-scale=1" />

		<style>
			*{box-sizing:border-box}body{background:#e9e9e9;font:20px /1.6 'Source Serif Pro',serif}[role="banner"]{padding:30px 0;}h1{font:400 4em Sacramento,cursive;text-align:center;color:#c96260;margin:0 0 30px}h2,p,ul,ol{margin:0 0 20px}a{color:#4f82b0}button{color:#FFF;border:none;display:inline-block;padding:10px 30px;background:#c96260;font:inherit;cursor:pointer;font-size:18px}section{background:#B2BCC4;color:#272739;padding:30px;margin:0 0 40px;border:4px solid #a2acb4}.wrap{max-width:800px;margin:0 auto}.audio-player{background:#a2acb4}.audio-player audio{display:block;margin:0 0 10px;width:100%}
		</style>
	</head>
	<body>
		<div class="wrap">
			<header role="banner">
				<h1>The recap</h1>
				<p>Check the <code>&lt;script&gt;</code> tag for tasks and instructions. All required DOM elements are below:</p>
				<p>Unless appending the result to the DOM, assume that you'll need to <code>console.log</code> the result of each task.</p>
			</header>

			<section>
				<h2>Elements for: 1. Functions</h2>

				<ul class="strings"></ul>
			</section>

			<section>
				<h2>Elements for: 3. DOM</h2>

				<div class="content">
					<p>Maecenas faucibus mollis <a href="#">interdum</a>. Curabitur blandit tempus porttitor. Vestibulum id ligula porta felis euismod semper. Curabitur blandit tempus porttitor. Donec sed odio dui. <a href="#">Duis</a> mollis, est non commodo luctus, nisi erat porttitor ligula, eget lacinia odio sem nec elit.</p>

					<p>Cras justo odio, dapibus ac facilisis in, egestas eget quam. Aenean eu leo quam. <span id="anId">Pellentesque</span> ornare sem lacinia quam venenatis vestibulum. Lorem ipsum dolor sit amet, consectetur <a href="#">adipiscing</a> elit. Nullam quis risus eget urna mollis ornare vel eu leo.</p>
				</div>
				<button type="button" class="what-time">What time is it?</button>

			</section>

			<section>
				<h2>Elements for: 4. Media</h2>

				<div class="audio-player"></div>
			</section>

			<section>
				<h2>Elements for: 5. AJAX</h2>
				
				<ul class="people"></ul>
			</section>

		</div>

		<script>

			/* Functions
			---------------------- */


			// 1. Write a function that returns the word `Hi!`
			function hello() {
				return 'Hi!';
			}
			// console.log(hello());
			
			
			// 2. Write a function that takes in two numbers, adds them together and returns the result.
			function add(a, b) {
				return a + b;
			}
			// console.log(add(1,2));


			// 3. Write a function that takes in a number and returns `Low` if the number is smaller than 0 and `High` if it is greater than zero.
			function numberBetween(n) {
				if (n < 0) return 'Low';
				else if (n > 0) return 'High'
			 	else if (n === 0) return 'Mid';
			}
			// console.log(numberBetween(-1));
			// console.log(numberBetween(1));


			// 4. Extend the previous function to return `Mid` if the number is exactly 0.
			// console.log(numberBetween(0));


			// 5. Write a function that takes in a string, and creates/appends a new `li` element to the `ul.strings` with that string.
			function addString(s) {
				var li = document.createElement('li');
				li.innerText = s;
				document.querySelector('.strings').appendChild(li);
			}
			// addString('123');



			/* Objects & arrays
			---------------------- */

			// 1. Create an object with properties `a = 0` and `b = 1`. Then, assign the value `2` to the key `c`.
			var obj = { a: 0, b: 1 };
			// console.log(obj);
			obj.c = 2;
			// console.log(obj);


			// 2. Create an array with the values `0, 1, 2`.
			var arr = [0, 1, 2];
			// console.log(arr);

			// 3. Append `3` to the previous array.
			arr.push(3);
			// console.log(arr);

			// 4. Create a new array with the following objects:

			/*
			name = Jo, age = 24
			name = Patrick, age = 19
			name = Denise, age = 28
			*/
			var people = [
				{
					name: 'Jo',
					age: 24,
				},
				{
					name: 'Patrick',
					age: 19,
				},
				{
					name: 'Denise',
					age: 28
				}
			];
			// console.log(people);

			// 5. Sort the array into age order.
			people.sort(function(a, b) {
				return a.age - b.age;
			});
			// console.log(people);


			// 6. Filter the array, leaving only those under the age of 25.
			var youngPeople = people.filter(a => a.age < 25);
			// console.log(youngPeople);

			// 7. Extend the previous array to return a new array of just their ages.
			var youngPeoplesAges = youngPeople.map(function(a) {
				return a.age;
			});
			// console.log(youngPeoplesAges);


			/* DOM
			---------------------- */

			// Using `.content`, perform the following actions:
			var content = document.querySelector('.content');

			// 1. Colour each link `#C96260` using JavaScript.
			var links = content.getElementsByTagName('a');
			[].forEach.call(links, function(el) {
				el.style.color = '#C96260';
			});


			// 2. Set the opacity of the ID'd span to 0.2.
			var span = content.querySelector('#anId');
			span.style.opacity = 0.2;


			// 3. When the button is clicked, add another paragraph to the content area. Use `new Date().toString()` for the content.
			var button = document.querySelector('.what-time');
			button.addEventListener('click', function() {
				var p = document.createElement('p');
				p.innerText = new Date().toString();
				content.appendChild(p);
			});


			// 4. When any link is clicked, console.log the text inside the element.
			[].forEach.call(links, function(el) {
				el.addEventListener('click', function(event) {
					event.preventDefault();
					console.log(this.innerText);
				});
			});


			/* Media
			---------------------- */

			// All in JS:
			// 1. Create an audio element and add it to `.audio-player`
			var player = document.createElement('audio');
			var playerContainer = document.querySelector('.audio-player');
			playerContainer.appendChild(player);

			// 2. Set the src to be: `song.mp3` (and add the controls attribute for testing)
			player.src = 'song.mp3';
			player.setAttribute('controls', true);


			// 3. Create a play/pause button and hook up the events
			var playButton = document.createElement('button');
			playButton.textContent = 'Play/pause';
			playerContainer.appendChild(playButton);
			playButton.addEventListener('click', function() {
				player[player.paused ? 'play' : 'pause']();
			});
			

			// 4. Create a mute/unmute button and hook up the events
			var muteButton = document.createElement('button');
			muteButton.textContent = 'Mute/unmute';
			playerContainer.appendChild(muteButton);
			muteButton.addEventListener('click', function() {
				player.muted = !player.muted;
			});

			// 5. Create a input[type="range"] with the attribues: `min="0.5" max="2" step="0.1"`, that alters the playback rate of the audio element. The event 'input' will be helpful for this one.
			var playbackRate = document.createElement('input');
			playbackRate.setAttribute('type', 'range');
			playbackRate.setAttribute('min', 0.5);
			playbackRate.setAttribute('max', 2);
			playbackRate.setAttribute('step', 0.1);
			playerContainer.appendChild(playbackRate);
			playbackRate.addEventListener('input', function() {
				player.playbackRate = this.value
			});


			/* AJAX
			---------------------- */

			// 1. Fetch the JSON from https://jsonplaceholder.typicode.com/users
			fetch('https://jsonplaceholder.typicode.com/users')
				.then(response => response.json())
				.then(renderPeople);

			function sanitize(string) {
				if (!window._sanitizer) window._sanitizer = document.createElement('div');
				window._sanitizer.innerText = string;
				return window._sanitizer.innerText;
			}

			// 2. Add an `li` for each user with the layout to `.people`
			function renderPeople(people) {
				var content = '';
				people.forEach(function(person) {
					content += ([
						'<li>',
							'<h4>',
								'<a href="' + sanitize(person.email) + '">' + sanitize(person.name) + '</a>',
								' works at ',
								'<strong>' + sanitize(person.company.name) + '</strong>',
							'</h4>',
						'</li>'
					].join(''));
				});
				document.querySelector('.people').innerHTML = content;
			}

		</script>
	</body>
</html>
